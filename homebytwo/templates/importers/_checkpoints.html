{% load humanize geojson_tags widget_tweaks %}

{% if checkpoints_formset %}
  <ul class="list-stacked">
    <h4>Checkpoints</h4>
    {% for checkpoint, form in checkpoints_forms %}
      <li class="box box--default box--tight mrgv- pdg- place place--checkpoint relative-parent"
      data-geom='{{ checkpoint.place|geojsonfeature:"name" }}'>
        <label class="label mrgv0" for="{{ form.include.id_for_label }}">
          {% for hidden_field in form.hidden_fields %}
            {{ hidden_field }}
          {% endfor %}
          {% for field in form.visible_fields %}
            {% render_field field class="checkbox" %}
          {% endfor %}
          {{ checkpoint.place.name }}, {{ checkpoint.altitude_on_route.m|floatformat:0|intcomma }}m
        </label>
        <p class="text-small text-right mrgv0">
          {{ checkpoint.place.get_place_type_display }} - {{ checkpoint.distance_from_start.km|floatformat:2|intcomma }}km
        </p>
      </li>
    {% empty %}
      <li class="box box--default box--tight mrgv- pdg- ">No checkpoint found along the route.</li>
    {% endfor %}
  </ul>
{% endif %}
