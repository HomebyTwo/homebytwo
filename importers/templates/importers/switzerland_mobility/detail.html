{% extends "base.html" %}
{% load static leaflet_tags geojson_tags humanize %}

{% block title %}Home by Two - {{ route.name }}{% endblock %}

{% block extralinks %}
    {% leaflet_js %}
    {% leaflet_css %}
{% endblock extralinks %}

{% block content %}

    {% include "importers/switzerland_mobility/includes/_alert.html" %}

    {% if route %}
        <h1 class="mrgt mrgb-- text-center">{{ route.name}}</h1>
        <h2 class="mrgv0 text-center">{{ route.get_length.km|floatformat:1|intcomma }}km - {{ route.get_totalup.m|floatformat:0|intcomma }}m+ - {{ route.get_totaldown.m|floatformat:0|intcomma }}m-</h2>
        <div class="clearfix mrg">
            <a class="pull-left" href="{% url "switzerland_mobility_index" %}" title="list of Switzerland Mobility routes">Back</a>
        </div>

        {% include 'importers/switzerland_mobility/includes/_checkpoints.html' %}

    {% else %}
        <p class="mrg">Route not found.</p>
    {% endif %}

    {% if route.geom %}
        {% leaflet_map "main" callback="route_map_init" %}
    {% endif %}

{% endblock content %}

{% if route.geom %}
    {% block extrajs %}
        <script type="text/javascript">
            function route_map_init (map, options) {
                var route = L.geoJson({{ route.geom|geojsonfeature|safe }});
                route.addTo(map);
                map.fitBounds(route.getBounds());
                map.scrollWheelZoom.disable();
            }
        </script>
    {% endblock extrajs %}
{% endif %}