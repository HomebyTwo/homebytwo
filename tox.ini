[tox]
envlist = py37
skipsdist = True
[testenv]
deps = -r{toxinidir}/requirements/test.txt
setenv =
    PYTHONPATH = {toxinidir}
    DJANGO_SETTINGS_MODULE=config.settings.ci
    setenv =
        DATABASE_URL={env:DATABASE_URL:postgis://homebytwo:homebytwo@localhost/homebytwo}
commands =
    flake8 homebytwo
    pytest homebytwo -n 2 []

[testenv:travis]
passenv = COVERALLS_REPO_TOKEN TRAVIS TRAVIS_*
commands =
    flake8 homebytwo
    pytest homebytwo -n 2 []
    coveralls

[pytest]
python_files = test*.py tests.py
norecursedirs = .tox node_modules deployment .git
addopts = --cov-report=term-missing --cov=homebytwo
